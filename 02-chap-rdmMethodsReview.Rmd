# A brief overview of ecological regime detection methods methods {#rdmReview-chapter}     
## Introduction

Long-lasting changes in the underlying structure or functioning of natural systems due to exogeneous forcings (also called regime shifts) is of interest to ecologists. The ability to identify and predict these shifts is particularly useful for systems which are actively managed, provide ecosystem services, or provide benefit to societiy. There exists a disparity among the number of methods proposed for detecting abrupt changes in ecological, oceanographic, and climatological systems and the studies evaluating these methods using empircal data. Despite the already large number of existing methods and models, new methods continue to permeate the literature. Although reviews of regime shift detection methods exist (@scheffer2015generic, @rodionov_brief_2005, @andersen_ecological_2009, @perretti2012regime, @roberts2018early, @dakos2015resilience), the most comprehensive presentation of available methods is outdated (@rodionov_brief_2005). See also @kefi2014early for a review and applications of some spatial indicators.

There is currently not a single and current resource to which ecologists can refer for quantitative RDMs. Past reviews (@rodionov_brief_2005, @andersen_ecological_2009, @perretti2012regime) of RDMs vary in both the number and detail of the methods presented.This chapter is meant to serve as an addendum, of sorts, to the aforementioned review articles. Rather than discussing in detail each method, I follow the style of @rodionov_beief_2005 in that I present a brief overview of RDMs and point the reader to original sources for detailed descriptions of the methods.


## Methods 

Methods proposed as RSDMs are not easily identified using systematic literature review techniques for a few reasons. First, the terminology associated with regime shift detection methodologies is highly variable within and among fields. For example, the terms, *regime shifts, regime changes and tipping points* are variably used in studies of ecological systems, whereas *inhomogeneities* is common in meterology and climatology and *structural change* is largely confined to econometrics. Although the definition of, e.g., a regime shift and a structural change vary across and within fields of study, some methods are shared.

Second, papers introducing a new method or approach to identifying regime shifts are not often proposed in publications that focus primarily on quantitative methodologies (e.g., *Ecological Modelling*, *Methods in Ecology and Evolution*) or in general ecology journals (e.g., *Ecology*). Instead, they are often published in journals with audiences that may not necessarily overlap with typical searches of the ecological litearture (e.g., *Entropy*, *Progress in Oceanography*). 

I conducted a systematic literature review to identify original papers introducing quantiative regime detection metrics (RDMs). Although the literature review boolean (see below) was designed to detect as many methodological papers as possible, many methods were not found using this method. Therefore, I filled the gaps using prior knowledge. Finally, I gathered additional methods using the snowball method from previous reiews of RDMs (@scheffer2015generic, @rodionov_brief_2005, @andersen_ecological_2009, @perretti2012regime, @roberts2018early, @dakos2015resilience). 

*Web of Science.* I used the Thomson-ISI Web of Science (WoS) database to identify papers published prior to March 2019 that introduced new RDMs. The complete boolean was: 
> (TS=("regime shift*" OR "regime change" OR "abrupt shift*" OR "abrupt change" OR "break point" OR "change point" OR "change-point" OR "tipping point" OR "structural change" OR "observational inhomogeneity" OR "abrupt" OR "alter* state" OR "sudden" OR "stark" OR "threshold") AND TS=("new method" OR "new approach" OR "novel method" OR "novel approach" OR "we introduce" OR "I introduce") AND WC=(Fisheries OR Ecology OR "Biodiversity Conservation" OR "Environmental Sciences" OR Biology)) AND DOCUMENT TYPES: (Article)
Indexes=SCI-EXPANDED, CPCI-S, BKCI-S, ESCI Timespan=All years  

where '*' indicates a wildcard. Next, I read the titles abstracts to retain only articles positing a 'new' RDM. If it was not clear whether a new method was being introduced, I further read the article to determine whether it should be included. 

*Prior knowledge and snowball method.* Next, I gathered methodological papers not identified using the WoS review criteria based both on prior knowledge previous RDM review articles @scheffer2015generic, @rodionov_brief_2005, @andersen_ecological_2009, @perretti2012regime, @roberts2018early, @dakos2015resilience.

```{r bibAnalysis}
source(paste0(here::here(), "/chapterFiles/rdmReview/bibliographyAnalysis.R"))
```

## Results

The Web of Science search yielded `r nrow(bib)` unique articles, to which I added an additional `r n.gs` and `r n.prior`. 

A shortlist of 50 papers (i.e., 37%) comprised those that met our evaluative criteria (Table 3)

\@ref(fig:rdmReviewFlow)



```{r rdmReviewFlow, fig.cap="Flowchart of the litearture review process for identifying new regime detection methods. Note: only the first ten pages of Google Scholar results were exmamined."}
DiagrammeR::grViz(
  "digraph {
  graph [layout = dot, rankdir = TB]
  
  # define the global styles of the nodes. We can override these in box if we wish
  node [shape = rectangle, style = filled, fillcolor = White]
  data1 [label = 'Web of Science\n (n = )', shape = folder, fillcolor = Linen]
  data2 [label = 'Google Scholar\n (n = )', shape = folder, fillcolor = Linen]
  data3 [label = 'Other \n (n = )', shape = folder, fillcolor = Linen]
  dups [label = 'Remove Duplicates \n (n = )']
  
  filter [label =  'Filter Results\n (n = )']
  results [label= 'Final Methods \n (n = )']
  
  # edge definitions with the node IDs
  {data1, data2, data3} -> dups -> filter  -> results
  }"
  )

```



There was a high disparity among the number of methods of which I was previously aware and those identified in a review of Web of Science. Therefore, I conducted an informal search of the Google Scholar database, which is notoriously broader in scope. The length of boolean for the Google Scholar database is limited by the number of characters. Unfortunately, this, coupled with the wide breadth of Google Scholar's search boundaries, limits the capacity to which Google Scholar can be used to refine the literature to a manageable number of articles. For these reasons I skimmed the titles and authors of these results for the first 25 (N = 250 articles) pages only of search returns. It should be noted that the order of terms appearing in the boolean are regarded as the order of desired relevancy. I used the following boolean:
> ("regime shift" OR "regime change" OR "tipping point") AND ("new method" OR "new approach" OR "novel method" OR "novel approach")

We identified XXX unique, regime detection methods in the ecological and relevant literature using Google Scholar, Web of Science, and prior knowledge ('other'; see ). XXX% of the methods were already identified in previous review papers, XXX% were identified during the systematic review, and XXX% were only identified based on prior knowledge of the author. 


### Filtering results

```{r filterMethodsResults, echo=F, eval=T, cache = T, message=F, warning=F}
# Load and munge lit review data
## Read in the bib results from WOS search
bib.orig <-
  readr::read_csv(paste0(
    here::here(),
    "/chapterFiles/rdmReview/wosresults_20190205_newMethods.csv"
  )) %>% 
  mutate(TI = tolower(TI)) %>% 
  mutate(SO = toupper(SO))

## Filter results: Keep papers with to 'regime shifts' (and synonyms) in abstract or title
topicFilter <-
remove.list <-
paste(
c(
"regime shift",
"regime change",
"abrupt shift",
"abrupt change",
"threshold",
"observational inhomogeneity",
"structural",
"tipping point",
"boundary",
"early-warning",
"early warning"
),
collapse = '|'
) %>% 
  tolower()

bib <- bib.orig %>% dplyr::filter(grepl(topicFilter, TI) |
grepl(topicFilter, AB))

## Filter results 2: Keep only those with reference to a method or framework in abstract or title
topicFilter2 <- paste(c("method", "framework"), collapse = '|')
bib <- bib %>% dplyr::filter(grepl(topicFilter2, TI) |
                               grepl(topicFilter2, AB))

# ## Filter results 3: Keep only relevant publications (SO)
# topicFilter3 <- paste(c("ecology", "ecography", "environ"), collapse = '|') %>% toupper()
# bib <- bib %>% dplyr::filter(grepl(topicFilter3, SO))

## Download top 50 ecology journals (SJR)
tempFolder <- tempdir()
download.file("https://www.scimagojr.com/journalrank.php?category=2303&type=j&out=xls", 
              destfile = paste0(tempFolder,"/", "mySJRdata.csv"))#, method = "curl")
list.files(tempFolder)

topJrnls <-  read.csv(paste0(tempFolder, "/mySJRdata.csv"), header = T, sep=";") %>% 
  dplyr::select(Rank, Title, SJR.Quartile) %>% 
  rename(SO = Title) %>% 
  mutate(SO = toupper(SO)) %>% 
  mutate(SO = str_replace(SO, " AND ", " & ")) %>% 
  dplyr::filter(SJR.Quartile == "Q1"|
                                   SJR.Quartile == "Q2") 

# Define other relevant jouranls not in top journals..
methJrnls <- c("METHODS IN ECOLOGY AND EVOLUTION", "ECOLOGICAL MODELLING")

## Filter bib by the 1st Quartile of SJR-ranked ecology journals (currently based on year 2017) + METHODS + ECOMOD
bib.keep <- bib %>% dplyr::filter(SO %in% topJrnls$SO | SO %in% methJrnls)%>% 
  mutate(SO = as.factor(SO)) %>%  as_tibble()
```

```{r methJrnlsFigs, echo=F, eval=T, cache = T, message=F, warning=F, fig.cap="Distribution of articles related to ecological regime shift methodologies and frameworks published in the first and second quartiles of SJR *ecology* journals and in *Methods in Ecology and Ecolution* and *Ecological Modelling*."}
# Visualize results
## Number of articles annually
ptemp1 = ggplot(bib.keep %>%
         group_by(PY) %>%
         summarise(N = n())) +
  geom_bar(aes(x = PY, y = N), stat = 'identity') +
  ylab('number of articles') + xlab('publication year') +
  theme_bw() + theme(axis.text.x = element_text(angle = 35, hjust = 1, size = 6))

# Distribution across journals over all years
ptemp2 = ggplot(bib.keep %>%
         group_by(SO, PY) %>%
         mutate(N = n()) %>% ungroup() %>%
         distinct(SO, N) %>%
         # filter(N > 1) %>%
         arrange(N)) +
  geom_bar(aes(x = SO, y = N), stat = 'identity') +
  ylab(paste0("articles published ", min(bib.keep$PY)," to ", max(bib.keep$PY), "   " )) + xlab('publication title') +
  theme_bw() + theme(axis.text.x = element_text(angle = 90, hjust = 1, size = 6))

grid.arrange(ptemp1, ptemp2, ncol=2)#, nrow=2)
```

### WOS Search results
The initial search prior to filtering by abstract yielded (see wosResults_20190205.xls) __1209__ articles.

We removed articles containing 

## Discussion 

! Most methods have not been tested/applied to non-stylized (empirical) data!


1. Major findings of the review. 
1. What major assumptions are we currently making about the data and the system that we need to know more about moving forward? i.e., where are the gaps in knowledge?
1. How has or how can we take advantage of unstructured or semi-structured data to ID regime shifts?
1. How can or should we adapt our monitoring schemes to better suit these (or at least the seemingly helpful) analyses?
1. What about identifying the drivers behind the shifts? 
1. Which methods posit they can identify the, or potential, drivers of the state changes? Which have shown it?

## On the lack of surveying other fields

As is apparent in the number of methods identified in this chapter, plenty of methods are proposed as RDMs for ecological data. We restricted our literature review to the ecological litearture. Consequently, we do not present the dozens of methods available in other literatures (e.g. in climatology, meterology, economtry, and theoretical statistics). We suggest future applications of change-point methods review these literatures, especially as it pertains to methodological advancements and critique, so as to avoid overlap in efforts. 


Potential text: 
1. Climate change is expected to induce an increase in both the intensity and frequency of rapid ecological change or disturbance, impacting social systems, potentially to the detriment of human communities most vulnerable. Identifying and forecasting these changes is critical for community and ecological planning, management, and disaster mitigation. 

1. Because ecological and social systems are tightly coupled, we have used indicators in the environment and in wildlife communities to identify change and potential changes that may impact our social communities. 

1. Many regime shift analytical papers suggest that, using multiple quantitative methods to provide for evidence for a regiem shift in a specific data set is necessary  (@lindegren_early_2012, easonYYYY). Although this proposition is valid, comparing results within a single system using multiple methods has often yielded varying results. Managing systems using quantitative methods that yield different results may yield improper management techniques and objectives. 

### RDMs outside ecology and related fields

Change-point detection is a huge field, especially in information and control theory (@aminikhanghahi2017survey). 

Identifying historic ecolgoical regime changes has been achieved using post-hoc analyitcal approaches Methods for reliably forecasting and predicting these changes are less common. Although numerous quantitative methods exist for detecting ecological regime shifts, new methods are proposed for achieving this aim ata  XXX rate (*insert figure of number of papers per year with new methods*). These methods have proven useful in detecting shifts in atmospheric and fisheries catch data, and in systems that are well-described by a few state variables, or can be modelled reliably with matheamtical equations. Because ecological comunities are more complex than, say, a simple Lotka-Volterra predator prey system, the set of reliable regime shift detection methods narrows. 

Ecological and social-ecolgical systems have many unpredictable and variably interacting components. Quantitative models and methods are available for analyzing complex systems, but often require more data than is typically available in ecological reserach and management. Hence, tracking the changes in ecological systems is rarely done so using multiple variables. 

A survey of the methods available for detecting ecological regime shifts in high dimensional data is timely. Although multiple reviews of regime shift indicators exist, Recent reviews of regime shift indicators (Andersen et al, the others) are outdated, are not comprehensive (include only a subset of the available RSDMs), and do not provide recommendations for which events, systems, or data characterstics are appropriate for these methods. 

Some RSDMs are proposed for and are subsequently applied to data having specific characteristics, while others are proposed to be useful in multiple systems and on data of varying characterstics (e.g., Karunithi et al; Mayer 2007; Eason). This review provides a summary of the available methods and evaluates the appropriateness of these methods to data of varying character, quality, and quantity.

In this chapter I presented a comprehensive overview of quantitative methods proposed as regime detection methods for ecological data. I discuss the relevant characteristics of the data/information that are required for each method, and how these characterstics may help or hinder the ecologists' interpretation of the analytical results. We pay special attention to the RSDMs that are most appropriate for  analysis of high dimensional and noisy ecological data. 




## TEXT NOT USED:
### Identifying papers/RSDMs in the literature
I used the following databases to identify scholarly works that introduce and/or explain methods for identfying regime shifts:
1. Web of Science
    i. __Database searches*
          a. Boolean (+ = asterisk in the database search)
                i. WOS:
                ii. SCOPUS:  ( TITLE-ABS-KEY ( ( approach  OR  analysis  OR  metric  OR  method^ )  AND  ( detect^  OR  predict^ ) )  AND  TITLE-ABS-KEY ( {regime shift}  OR  {regime change}  OR  {abrupt change} ) ) __1,473__ (where ^== __ in Scopus)
    ii. __Opportunistic papers__
          a. We used expert opinion (authors JLB, etc.) to identify any missing RSDMs that were not detected in our formal database searches. (i am making this next part up--need to double check once i have results)-->These papers are are typically found in the grey literature, or are published in journals not obvious to the general ecologist (e.g., name an obscure journal here).
          b. Justification for our database searches containing some of these methods which are known/obvious to the author(s).

2. Procedures for filtering the papers.
    i. We removed duplicate titles (from the merging of Scopus and WOS), which resulted in _______ unique scholarly works.
    i. We read the abstracts of each paper to determine the following:
          a. Was this a new method being proposed or used? (if yes, proceed to ii.))
          b. Was this just a case study or another application of a previously published method? (if yes, note the method(s) used and identify original method(s) source)
          c. If this paper was an application of a method, we noted the method, and identified the orignal source for the method (if possible)
    ii. Identify characteristics of the method
        c. It is model-based?
        a. Does it require a mathematical model?
        b. Does it require *a priori* knowledge of the regime shift
        d. Does it forecast or provide predicitons?
        e. Assumptions required (e.g., discontinuity, step functions, normality of response vars)
    iii. Identify requirements for the data input
        a. Require equal spacing b/w observations?
        b. Minimum # data points required to use?
        c. Minimum # of state variables required?
    iv. Identify the characteristics of the data USED to demonstrate the method
        a. Spatial resolution and extent
        b. Temporal resolution and extent
        c. Number of state variables
        d. System type
          i. Whole-system vs. selected variables?
          ii. Experimental system or observational/passive
3. Note the number of times the paper has been cited


### Results

We identified _______ number of quantiattive anlaytical approaches to identifying regime shifts and abrupt changes in data. 

### Potential figures

1. X = year Y = number of publications for *new* RSDMs in the ecol/env literature
1. X = year Y = # pubs for new RSDM appropriate for multidimensional systems


