---
output:
  pdf_document: default
  html_document: default
---
# A Brief Overview of the Ecological Regime Detection Literature {#rdmReview}
```{r cache = TRUE, echo=FALSE, warning=FALSE,  message=FALSE, eval=TRUE, results="hide"}
# Chunk defaults
knitr::opts_chunk$set(
          cache = TRUE, cache.path = "_cache/",
          include=FALSE,
          # message = FALSE,  eval=TRUE, echo=FALSE, error=FALSE,
          warning=FALSE,
          fig.align='center',
out.width = "95%")
```
```{r sourceBibAnalysis, echo=FALSE, warning=FALSE,  message=FALSE}
# This chunk is the initial analysis of the bibliography results, and turned the search results into csvs for simple reviewing. 
## This script also saves some objects to refer to later in figures in this chapter
suppressMessages(source("./chapterFiles/rdmReview/bibliographyAnalysis.R"))
```

## Introduction
<!-- >*If a regime shift occurs and no one detects it--is it a regime shift at all?* -->
<!-- **No**, if the regime shift is defined as a change in a system which negatively impacts humans. **Yes** if the regime shift is defined simply as a shift in the underlying strucutre of a system.  -->

Long-lasting changes in the underlying structure or functioning of natural systems due to exogeneous forcings (also called regime shifts) are increasingly reconized in ecology [@!!!!]. The ability to identify and predict these shifts is particularly useful for systems which are actively managed, provide ecosystem services, and/or benefit societiy. Despite the potential utility of quantitative methods for detection ecological regime shfits or abrupt changes, there exists a disparity among the number of methods proposed for detecting abrupt changes in ecological, oceanographic, and climatological systems and the studies evaluating these methods using empircal data [@hawkins2015ecosystems]. Further, new methods continue to permeate the literature. Although reviews of regime detection measures exist and some are recent [@mac2014scrutiny; @scheffer2015generic; @rodionov_brief_2005; @roberts2018early; @dakos2015resilience; @mantua_methods_2004; @litzow_early_2016; @kefi2014early; @andersen_ecological_2009; @boettiger_early_2013; @dakos_resilience_2015; @kefi2014early; @yin2017methods;@ducre2003comparison; @clements2018indicators; @filatova2016regime; @deyoung_regime_2008], few are akin to the 20-year old comprehensive presnetation of @rodionov_brief_2005. However, the rapid increase in methods in the literature is increasingly outdating the contribution of @rodionov_brief_2005. 

There is currently no single source to which the uninformed ecologist can refer for identifying potential regime detection measures. Existing reviews of this literature vary in both the number and detail of the methods presented. For example, the focus of @andersen_ecological_2009 is on the current state and direction of regime shift theory and detection, consequently not containing a comprehensive presentationregime shift detection @present many methods. @roberts2018early come close to presenting a comprehensive review, however, the focus here is on the data required to use methods and implications for rangeland ecology and management. 

Building a comprehensive database containing published regime detection measures based on formal literature review is not a simple feat for a few reasons, and this has implications for the application of methods by naive  First, the terminology associated with regime shift theory and detection is highly variable within and among fields [@andersen_ecological_2009]. For example, the terms, *regime shifts, regime changes* and *tipping points* are variably used in studies of ecological systems, whereas *inhomogeneities* is common in meterology and climatology, and *structural change* is largely confined to the study of economics. Although semantics vary both within and across disciplines some methods are shared or are concurrently applicable across fields. Second, papers introducing a new method or approach to identifying regime shifts are not often proposed in publication outlets with aims of disemminating new quantitative methods (e.g., *Ecological Modelling*, *Methods in Ecology and Evolution*). Rather, many new methods are published in journals with refined (e.g., *Entropy*, *Progress in Oceanography*), as opposed to publications with broader scopes (e.g., *Ecology* and *Nature*). 

Regime detection measures can be classified into one of two major groups which will largely dictate the applicability of an approach to an analyst or type of information. Some RDMs require the use of mechanistic models whereas others fall into the category of model-independent (or model-free). In most situations, the practical ecologist will have insufficient data or a limited understanding of the system with which to parameterize even the simplest mechanistic models. Further, developing an informative defining data-generating model (i.e. system of equations, differential equations) for more than a few variables (i.e. $\gg2$) is often intractable. Following the convention of @dakos_methods_2012 I classify the 66 regime detection measure identified as a result of this review and a based on prior knowledge as one of model-based or model(metric)-free. I generally synthesize the utility of these types of measures to the practical ecologist. 

### Aims 
The primary goal of this Chapter is to provide a single and comprehensive source of the qunatitative methods proposed for identifying ecological regime shifts, much like that of @rodionov_brief_2005. I also conduct a biolographic analysis of the relevant literature to identify trends in the development and current state of ecological regime shift theory. In this chapter I conduct a formal literature review in an attempt to generate a comprehensive list of the available regime detection measures, however, this list also required prior knowledge of available methods, as no search yielded a large portion of those previously known to me. 

## Methods 
First, I conducted a systematic literature review to identify candidate articles, or those which relate to ecological regime shift theory, using these results in an attempt to identify papers introducing a new or novel method to regime shift detection. These methods were supplemental with prior and expert knowledge*^[This includes methods in previous reviews, including @scheffer2015generic; @rodionov_brief_2005; @roberts2018early; @mantua_methods_2004; @litzow_early_2016; @kefi2014early; @andersen_ecological_2009; @boettiger_early_2013; @dakos_resilience_2015; @clements2018indicators; @filatova2016regime; @deyoung_regime_2008]. I then conducted an independent but similar literature review to identify trends in the development and persistence of the ecological regime shift literature. These steps are described in detail below. 

### Identifying candidate articles and regime detection measures {#revMeth1}
I attempted to compose a comprehensive list of the published quantitative regime detection measures by conducting a systematic litearture review. Despite multiple attempts at defining booleans to yield  identify the greatest number of methods in the literature, no single boolean yielded the majority of methods of which I was previously aware. In light of this, I also relied on my prior knowledge of available regime detection measures to build the database. 

I first queried the Thomson-ISI Web of Science (WoS) database (on 06 March 2019) to identify articles which mention terms related to regime shifts, or abrupt changes, using the following boolean:  

> TS=(("regime shift" OR "regime shifts" OR "regime change" OR "regime changes" OR "catastrophic change" OR "catastrophic shift" OR "catastrophic changes" OR "catastrophic shifts" OR "sudden change" OR "sudden changes" OR "abrupt shift" OR "abrupt shifts" OR "abrupt change" OR "abrupt changes" OR bistab\* OR threshol\* OR hystere* OR "phase shift" OR "phase shifts" OR "phase change" OR "phase changes" OR "step change" OR "step changes" OR "stepped change" OR "stepped changes" OR "tipping point" OR "tipping points" OR "stable states" OR "stable state" OR "state change" OR "state changes" OR "stark shift" OR "stark change" OR "stark shifts" OR "stark changes" "structural change" OR "structural changes" OR "change-point" OR "change point" OR "change-points" OR "change point" OR "break point" OR "break points" OR "observational inhomogeneity" OR "observational inhomogeneities") AND ("new method" OR "new approach" OR "novel method" OR "novel approach"))  

where '\*' indicates a wildcard. A pilot study revealed that by limiting the search to the Web of Science Categories *Ecology* and *Biodiversity Conservation* [i.e. by adding boolean term 'AND WC=(Ecology OR 'Biodiversity Conservation')] excluded many methods that are peripheral to this study. For example, numerouc univariate measures are used solely in climatology, physics, and data science/computer science literatures, where change-point analyses are abundant. Although additional methods could be identified by searching these fields, this dissertation focuses on using methods for analysing *multivariable* data. Consequently, many methods for analysing abrupt breaks in a single variable do not appear in the comprehensive list. Next, I identified articles which propose a 'new' method for identifying ecological regime shifts by searching within the results of the previous boolean. I restricted the search by appending the following boolean phrase required to appear in the title and/or abstract:

> AND ('new method' OR 'novel method' OR 'new approach' OR 'new practical method' OR 'new simple method' OR 'new multivariate' OR 'new tool' OR 'novel tool' OR 'novel multivarte' OR 'novel approach' OR 'new numerical' OR 'novel numerical' OR 'new quantitative' OR 'novel quantitative' OR 'i introduce' OR 'we introduce')

There appeared disparity among the number of methods of which I was previously aware and those identified in an initial Web of Science review. In an attempt to identify as many new methods as possible I conducted an informal search of the Google Scholar database, a database notoriously broader in scope than other academic dataabses. The length of boolean for the Google Scholar database is limited by the number of characters. Unfortunately, this, coupled with the wide breadth of Google Scholar's search boundaries, limits the capacity to which Google Scholar can be used to refine the literature to a manageable number of articles. For these reasons I arbitrarily skimmed the titles of the first 25 pages of the Google Scholar results (25 pages = 250 articles). It should be noted that the order of terms appearing in the boolean are regarded as the order of desired relevancy. I used the following boolean to identify these articles in Google Scholar:

> ('regime shift' OR 'regime change' OR 'tipping point') AND ('new method' OR 'new approach' OR 'novel method' OR 'novel approach')

The candidate articles identified by Web of Science and Google Scholar contained numerous articles proposing a new framework for identifying regime shifts rather than a new quantitative method. I exluded these from consideration as a 'new method' by removing them, and also removing articles proposing a novel application of a combination of previously-used methods [see @kong2017hydrological; @seddon2014quantitative; @vasilakopoulos2017resilience]. I also excluded papers which made relatively minor adjustments or updates to existing methods [@zhou2008one; but see @nicholls2011biological for an addition of variable optimization to the method in @nicholls_detection_2011 that was not included in the results] or articles proposing new methodologies in mathematical journals [@byrski2016double; @salehpour2011line] that have yet to be associated with or tested on ecological data, or suggested to be useful for empirical data.

### Bibliographic analysis of ecological regime shift literature {-#rsTerms2}
The stil-vague definition of ecological regime shifts has led to a breadth of articles exploring this phenomenon. I again used the Web of Science database to identify patterns in the development and persistence of the ecological regime shift literature. I conduct a systematic literature review using ISI Web of Science, and use these results to conduct exploratory bibliographic analyses. This literature search differs from the search conducted in Chapter Section\@ref(revMeth1) in that it was conducted to capture the overall development and breadth of the field of ecological regime shifts, rather than capturing the *quantitative methods* for identifying shifts. I used the following boolean to identify articles related to regime shift and abrupt change, and restricted this search to the ecological literature by including specifying which Web of Science categories *Ecology* and *Biodiversity Conservation* to search:

> TS=("regime shift" OR "regime shifts" OR "regime change" OR "regime changes" OR "catastrophic change" OR "catastrophic shift" OR "catastrophic changes" OR "catastrophic shifts" OR "sudden change" OR "sudden changes" OR "abrupt shift" OR "abrupt shifts" OR "abrupt change" OR "abrupt changes") AND WC=("Ecology" OR "Biodiversity Conservation") 

To explore the patterns and trends in the development of this field, I used clustering algorithms available in the R Package `bibliometrix` [@bibliometrix]. Among other things, this package contains function wrappers for conducting and visualizing network analyses based on keyword, authorship, and citation data. In an attempt to undertand the evolution of regime shift theory and relate this evolution to the quantitative methods in the ecological literature, I focus analyses on using keyword and concept themes rather than citation counts and author dominance. 

## Results
### Quantitative methods for identifying ecological regime shifts
```{r wosRegimePubsByYearwithNumEcolPubs,echo=FALSE, fig.cap = "Number of publications by year in fields 'Ecology' and 'Biodiversity Conservation' which included terms related to 'regime shift' (total = 654)."}
ggplot(wos.regime.plotData %>% 
               distinct(year, .keep_all=T)) +
    geom_bar(aes(x = year, y = nRegime.pubs, color = "Regime shift"), stat= "identity", show.legend=FALSE )+ 
  geom_line(wos.all.ecol, mapping = aes(x = year, y = nEcol.pubs/1e3, color = "All ecology"), size = 1.3)+
  scale_y_continuous(sec.axis = sec_axis(~.*1000, name = "# all ecology publications\n (line)")) + 
  scale_colour_manual(values = c("red", "black" )) +
  labs(y = "# regime shift \n relevant publications ",
              x = "year",
              colour = "Publication type")+ 
  theme(legend.position = c(0.05, 0.85), axis.title.y = element_text(size = 10))
```
I restricted the ISI Web of Science to the Web of Science categories (WC) 'Ecology' and 'Conservation Biology' as the original search yielded $>20,000$ results. This filtered the results down to a manageable amount of papers to review. Of the $2,776$ articles, $654$ included the terms relating to 'regime shifts' [see Section \@ref(rsTerms2); Figure \@ref(fig:wosRegimePubsByYearwithNumEcolPubs)], many of which were published in a predominately methodological journal, *Ecological Modelling* (Figure \@ref(fig:wosRegimePubsByJrnl)). The rapid rate of change publication of articles containing terms related to 'regime shifts' does not correspond with the linear change in the total number of ecological articles publishe over time (Figure \@ref(fig:wosRegimePubsByYearwithNumEcolPubs)). 
```{r wosRegimePubsByJrnl, echo=FALSE, eval=TRUE, message=FALSE, warning=FALSE, out.width="75%", fig.cap = "Number of articles containing phrases related to ecological 'regime shifts' published per publication outlet."}
 ggplot(wos.regime.plotData %>%
              group_by(journal) %>% 
              summarise(nJrnl = n()) %>% 
               filter(nJrnl >= 10, 
                      journal != "NA") %>% 
               arrange(nJrnl)) +
  geom_bar(aes(x =  journal, y = nJrnl), stat= "identity")+
  ylab('number of articles') + xlab("") +
  coord_flip()+
  theme_bw() + 
  theme(axis.text.y = element_text( hjust = 1, size = 4))+
  theme(axis.title.x = element_text(size = 8))
```

```{r methodsMetricsListTab1, echo=FALSE, message=FALSE, warning=FALSE}
require(kableExtra, quietly = T)
long_dt <- finalMetricsList %>%
  mutate(Source = paste0("\\@", myLabel1)) %>%
  dplyr::select(method, type1, Source ) %>% 
  rename(`Metric type`=type1,
         Method = method) %>% 
  arrange(`Metric type`, Method)


# make the table
pander::pander(long_dt,
                     caption = "List of the regime detection methods identified in this review.",
                     split.cells = c("50%", "20%", "15%"),
                     justify = c('left', 'center', 'center')
                     )
```

Using my prior knowledge of the relevant literature and by systematically searching the Web of Science and Google Scholar databases, I identified `r length(unique(finalMetricsList$method))` unique regime detection measures [Figure \@ref(fig:rdmReviewFlow); Table \@ref(tab:methodsMetricsListTab1)]. A total of $202$ of the $2,776$ articles identified by Web of Science contained terms in the title, keywords, or abstract related to a 'new method' (see Section \@ref(revMeth1)). Based on my prior knowledge of the literature and based on reviews of prior regime detection and regime shift review papers, I was previously aware of $68$ articles containing 'new' methods (Figure \@ref(fig:rdmReviewFlow)). Approximately half were successfully identified in the Web of Science and Google Scholar systematic review. After removing the papers containing the methods of which I was already aware prior knowledge, only $93$ articles remained to be reviewed 'by hand'. A review of these $93$ articles resulted in the identification of $5$ new methods [$2$ from Web of Science and $3$ from Google Scholar; Figure \@ref(fig:rdmReviewFlow)]. 
```{r rdmReviewFlow, echo=FALSE, message=FALSE, warning=FALSE, out.width="95%", fig.cap="Flowchart of the litearture review process for identifying new regime detection methods. Note: only the first ten pages (250 articles) of Google Scholar results were examined. Node shapes: folder = unfiltered articles; box = articles actively filtered; diamond = number of articles with new methods."}
# webshot::install_phantomjs()
# tempGraph <- DiagrammeR::grViz(
#   "digraph {
#   graph [layout = dot, rankdir = TB]
# 
#   # define the global styles of the nodes. We can override these in box if we wish
#   node [shape = rectangle, style = filled, fillcolor = White, fixedsize = TRUE, width=2, height=1]
#   data0 [label = 'Web of Science \n initial search \n (n = 2,776)', shape = folder, fillcolor = Linen]
#   data1 [label = 'Filtering \n by title & abstract \n (n = 202)', ]
#   data2 [label = 'Filter by \n prior knowledge \n (n = 93)']
#   data3 [label = 'Filtered by hand \n (n = 2)']
#   
#   gs1 [label = 'Informal Google \n Scholar search \n (n = 250)', shape = folder, fillcolor = Linen]
#   gs2 [label = 'Filtering by hand \n (n = 3)', shape = circle]
# 
#   prior [label = 'Prior knowledge \n (n = 68)', shape = circle, fillcolor = Linen]
#   data4 [label = 'Priors + \n Google Scholar \n (n = 71)', shape = circle]
#   
#   results [label = 'Final list of \n methods \n (n = 73)', shape = circle, fillcolor = Red]
# 
# # edge definitions with the node IDs
# data0 -> data1 ->data2 ->data3 ->results
# gs1 -> gs2 -> data4 -> results
# prior -> data4
# 
# }"
#   )

# Had to save this as a png becausde it wasnt rednreing correctly. If you need to update, please save again.
knitr::include_graphics("./chapterFiles/rdmReview/figures/figsCalledInDiss/myDiagraph.png")
```

```{r jrnlYearFig, echo=FALSE,out.width="100%",fig.cap= "Number of methods published over time."}
yearTemp <- finalMetricsList.bib %>% 
  group_by(year) %>% 
  summarise(n = n_distinct(label)) 

ggplot(yearTemp ) +
  geom_bar(aes(x = year, y =n), stat = 'identity') +
  ylab("articles published ") + xlab('publication year') +
  theme_bw() + 
  theme(axis.text.x = element_text(angle = 90, hjust = 1, size = 12))
```

<!-- HAVING ISSUES WITH THEMATIC MAPS FIGURE -- saying its too big so captions outside of float.... giving up for now... -->
```{r thematicMaps_keyword, echo=FALSE, eval=FALSE, fig.cap="A thematic map of the clusters (themes) identified among the (a) author-supplied and (b) ISI-supplied keywords for each article using a clustering algorithm.", out.width="95%"}
knitr::include_graphics(here::here("chapterFiles/rdmReview/figures/figsCalledInDiss/thematicMaps_keywords.png"))
```

### Bibliographic analysis of ecological regime shift literature
A search of Web of Science for articles in Ecology and Biodiversity Conservation containing phrases related to 'regime shifts' yielded $1,636$ original articles. These articles were not filtered in any fashion and as such all were considered in the bibliographic analysis. I used the clustering algorithms of the R package `bibliometrics` to produce thematic maps, which use clustering algorithms to identify clusters (or themes) based on bibliography features [e.g., keywords, authors;@cobo2011approach]. 

#### Thematic mapping using keywords
TWo types of keywords exist in the ISI Web of Science bibliograpy metadata: thsoe provided to the publication by the authors (author-supplied), and those defined by the ISI Web of Science (ISI-supplied). A keyword thematic map suggts these keywords are used very differently within this literature (Figure \@ref(fig:thematicMaps_keyword))^[Axes represent (x, Callon's centrality) the degree of interaction, or the contribution of the theme to the research field and (y, Callon's density) the strength of the network arcs, or the importance of a theme to the field. Clusters appearing in the quadrants (from top-right moving counter-clockwise) represent the following themes: I) motor-themes (important to the field and well-developed); II) basic-themes (well-developed but marginally important to the field); III) emerging and disappearing themes (under-developed and marginal); and IV) specialized themes (important but under-developed). These themes were identified using a clustering algorithm discussed further in @cobo2011approach.]. The clustering algorithm identified fewer clusters (themes) in the ISI-keywords (Figure \@ref(fig:thematicMaps_keyword)a) than were identified among the author-supplied keywords (Figure \@ref(fig:thematicMaps_keyword)b^; see footnote $^2$). This pattern is not surprising given the ISI-supplied keywords are restricted to pre-set number of keywords, whereas authors can and do provide synononyms, or words not used at all by ISI. The themes identified in the ISI-supplied keyword analysis were relatively consistent as the number of keywords analysed increased (Figure \@ref(fig:thematicMaps_keyword_isi)), but the themes varied drastically among the author-supplied keywords (Figure \@ref(fig:thematicMaps_keyword_author)). For this reason I make inference on only the ISI-supplied keyword cluster analysis. 

Four major themes were identified in the ISI keyword analysis and, interestingly, fell mostly within the quadrants representing the most extreme values: the first and the third quadrants (Figure \@ref(fig:thematicMaps_keyword_isi)). The themes identified by the ISI-supplied keywords were much larger in scope (e.g, dymamics, ecosystems, climate; Figure \@ref(fig:thematicMaps_keyword)a) than those identified in the analysis of author-supplied keywords (e.g., eutrophication, trophic cascade; Figure \@ref(fig:thematicMaps_keyword)b). That is, the themes of 'regime shifts' and 'ecosystem dynamics' are highly central to and dense within the regime shift literature (Figure \@ref(fig:thematicMaps_keyword)b-d). This suggests these two themes are important to the development of the field and are still strongly influencing the evolution of this feild. Although the dynamics (i.e. the study of non-linearity and stochasticity in ecological systems) plays a central role in the theory of ecological systems theory, the theme of dynamics is  not reflected in the many case studies of regime shifts in application [@litzow_early_2016]. In fact, @litzow_early_2016 found that $\sim50%$ of case studies actually tested or accounted for non-lienar dynamics when applying  early warning indicators and other regime shift measures to ecological time series. 
```{r thematicMaps_keyword_author, eval=FALSE,echo=FALSE, fig.cap="T", out.width="80%"}
## Currently these are not being run nor called from file.
knitr::include_graphics(here::here("chapterFiles/rdmReview/figures/figsCalledInDiss/thematicMaps_keywords_nVaries_author.png"))
```
```{r thematicMaps_keyword_isi, eval=FALSE,echo=FALSE, fig.cap="T", out.width="80%"}
## Currently these are not being run nor called from file.
knitr::include_graphics(here::here("chapterFiles/rdmReview/figures/figsCalledInDiss/thematicMaps_keywords_nVaries_isi.png"))
```

#### Historiograph, citation, and reviews
A few patterns appear in analyses of the intellectual and choronological structure of the ecological regime shift literature (Figure \@ref(fig:historiograph)). First, although the concept of stability, thresholds, and multiple stable states in ecological systems first appeared (and was well-receieved) in the literature in the 1970s [e.g., @holling1973resilience;@may1977thresholds], the most important papers in this field appeared primarily in the early and mid 2000s [@scheffer2003catastrophic;@carpenter2006rising;@folke2004regime; @walker2004resilience; @van2005implications]. The most recent major contributions to the field were concpetual works emphasizing planetery boundaries and tiping points and the impacts of not recognizing these shifts [@hughes2013multiscale]. Finally, the "rise" of resilience theory [@folke2004regime; @walker2004resilience], the first efforts of a search for early warning indicators of ecological regime shifts [@carpenter2006rising] and a spur of critique of regime shift detection methods [@andersen_ecological_2009;@contamin_indicators_2009] are highlighted in the historiograph.

The most influential papers in the field, based solely on number of citations, are those published in the late 2000s (Figure\@ref(fig:totArtCitesPerYear)), and include the articles which are broad in-scope and are still used today to frame studies in the context of global change, planetary boundaries, and large-scale tipping points [@rockstrom_planetary_2009; @smith2009eutrophication; @bennett2009understanding]. Around this time ($\sim2007$) is when the number of regime detection measures doubled (Figure \@ref(fig:wosRegimePubsByYearwithNumEcolPubs)). Artguably, papers that have been equally influential to the development of this field include those corresponding to the observed rapid increase in the number of total publications in ecological regime shift theory (in the early 2000s), @folke2004regime and @scheffer2003catastrophic (Figure\@ref(fig:totArtCitesPerYear)).
```{r historiograph, echo=FALSE, fig.cap="Chronological direct citation newtwork suggests the intellectual structure can be mapped to a few papers. This historiograph identifies important works explicitly in chronological, as opposed to absolute, order.", out.width="95%"}
knitr::include_graphics(here::here("chapterFiles/rdmReview/figures/figsCalledInDiss/historiograph_75quantile.png"))
```
```{r totArtCitesPerYear, echo=FALSE, out.width="95%", fig.cap="Total number of articles published and corresponding number of citations (for papers published that year). The most highly cited papers to-date are those published in the late 2000s."}
knitr::include_graphics(here::here("chapterFiles/rdmReview/figures/figsCalledInDiss/totArtCitesPerYear.png"))
```
```{r revArtNums,echo=FALSE,  out.width="95%",fig.cap="Total number of articles published per year by category as categorized by ISI. Book chapters, proceedings, editorials, and letters are excluded."}
knitr::include_graphics(here::here("chapterFiles/rdmReview/figures/figsCalledInDiss/revArtNums.png"))
```

Numerous reviews of the regime shift literature exist, ranging from conceptual reviews of the state of regime shift theory in ecology and application [e.g., @bestelmeyer_analysis_2011;@mac2014scrutiny;@andersen_ecological_2009], to studies of robustness of early warning indicators under various theoretical and practical conditions [e.g., @dutta2018robustness; @perretti2012regime; @lindegren_early_2012; @hastings2010regime; Figure \@ref(fig:revArtNums)]. Further, comprehensive reviews of the ecological regime shift detetion literautre are increasingly out-dated. A permanent and open-source database containing information critical to the testing, comparison, and implementation of RDMs may prove useful to the reader who is interested in applying RDMs but is lacking the statistical or mathematical background to do so.


## A synthesis of the methods available for the practical ecologist
Many of the methods identified in this review have yet to be tested on multiple, empirical data (see Table \@ref(tab:methodsMetricsListTab1)).  I categorize the regime detection methods as one of either model-free or model-dependent. Model-free and model-dependent methods are those which do and do not require a mechanistic model to describe the system, respectively. Because many of the model-dependent methods are based on autoregressive modelling apporaches, this is highlighted in the model-dependent section. 

The early warning indicators that are often referred to as, "traditional early warning indicators" (variance, skewness, autocorrelation at lag-1) are fairly well-reviewed, and have been tested under a variety of conditions [@dakos_methods_2012;@ditlevsen2010tipping; @lindegren_early_2012; @boettiger_quantifying_2012; @sommer2017generic; @perretti2012regime; @dutta2018robustness; @litzow_early_2016]. However, many of these works apply the traditional (and other) early warning indicators to simulated data, with only some [@contamin_indicators_2009; @perretti2012regime; @dutta2018robustness; @guttal2013robustness] testing under varying conditions of noise and expected shift types. The utility and robustness of the traditional early warning indicators is not consistent across and within sytems, making them of limited utility in situations where the system cannot be reliably mathematically modelled, or where we have limited data [see also Ch. \@ref(resampling)]. The authors of most reviews and comparative studies of early warning indicators suggest that no early warning indicator is reliable alone, or that work is needed to understand under what empirical conditions early warning indicators might fail [@kefi2014early; @clements2018indicators;  @filatova2016regime; @deyoung_regime_2008].



### Model-depdendent
Model-dependent require a mechanistic (mathematical) representation of the system, models which often carry strict assumptions that are easily violated by empirical systems [@abadi2010assessment]. Model-dependent methods are usefully categorized are used under two contexts: differentiable systems of equations or autoregressive. The methods relying on mechanistic models include model descriptions of systems with many, dynamic and interacting components. For example, models are used to reconstruct trophic food webs where prey or predator collapse induces trophic regime shifts in freshwater lake systems [@carpenter2011early]. 


### Model-free
Model-free (or metric-based per @dakos_methods_2012) methods are those which do not require a mathematical represntation of the system. In fact, many require much less knowledge about the system component dynamics and their interactions to calculate a results. The utility of these methods vary with respect to the number of state variables encompassed in the method, and are therefore further categorized as either univariate (using a single dimesion) or multivariable (using but not necessarily requiring multiple dimensions). The most widely used model-free univariate RDMs include descriptive statistics of individual system components (i.e. univariate), such as variance, skewness, and mean value [@mantua_methods_2004; @rodionov_application_2005; @andersen_ecological_2009]. These univariate methods, often referred to as 'traditional early-warning indicators' require only very simple calculations of individual variables, however, their efficacy in empirical systems analysis is controversial. For example, variance [@carpenter2006rising] and skewness (of a single variable), oft referred to generally as 'leading indicators' or 'early-warning indicators' in the literature, has been applied to both theoretical and empirical systems data with varying results. 

Other 


@hastings2010regime point out an important feature of using any methods for identifying regime shifts in empirical system data: we only have a single history within which we can compare AND these metrics which depend on the system exhibiting a change in variance or skewness around a mean value before and after a regime shift require hte system to have a smooth potential, rather than one which can manifest complex dynamics (i.e. non-smooth potential). If we are using RDMs to attempt to forecast and prevent non-smooth or abrupt changes, then there is little justification for relying upon these early warning indicators. Specifcally, these early-warning indicators may be most useful when the system is expected to undergo a transcritical or critical bifurcation before exiting a regime [@lenton2011early]. @hastings2010regime aptly point out that any realisitic ecological model should include some degree of stochasticity, and when this stochasticity is introduced into the function, the funciton will likely not be differentiable at the point of the regime shift [@graham1984existence]. If a function lacks a gradient along its range, then the traditional leading indicators will most likely not indicate the abrupt change in system dynamics alony any paramter.

## Discussion 
In this chapter I present a comprehensive list of the regime detection measures proposed for analyzing ecological data. Although multiple reviews of regime detection measures exist, they are either not comprehensive in their survey of the possible methods or are increasingly out of date with respect to the number of methods proposed in the litearture [@rodionov_brief_2005; Figure \@ref(fig:jrnlYearFig)]. Most reviews since the comprehensive list presented in @rodionov_brief_2005 are not comprehensive, instead focusing on a single aspect of measures that may be useful to a particular audience. For example, @roberts2018early summarizes methods capable of handling multiple (c.f. a single) variable, and @dakos2015resilience review only methods designed to detect the phenomenon of critical slowing down. The list presented here does not discriminate, and provides an update to the seminal methods paper by @rodionov_brief_2005. It is important to note tha contributions of previous reviews to the understand and scrutiny of regime detection measures in ecology: @mac2014scrutiny; @scheffer2015generic; @rodionov_brief_2005; @roberts2018early; @dakos2015resilience; @mantua_methods_2004; @litzow_early_2016; @kefi2014early; @andersen_ecological_2009; @boettiger_early_2013; @dakos_resilience_2015; @clements2018indicators; @filatova2016regime; @deyoung_regime_2008. 

Leading indicators/regime detection measures which analyze only single variables (e.g., variance, autocorrelation at lag-1) are well-tested on both theoretical and empirical data [e.g. @burthe2016early]. Among the most widely used RDMs indicators applied to time-series data include an index of variance, moments around the grand mean (skewness and kurtosis), and critical slowing down [@carpenterBrock2011early, @carpenter2006rising]. Although univariate indicators may provide insight into relatively simple systems, their, their reliability as indicators for complex systems is less certain [@burthe2016early, @dutta2018robustness, @perretti2012regime, @sommer2017generic, @bestelmeyer_analysis_2011]. Leading indicators can be a reliable warning of impending shift [@carpenterBrock2011early],  Some methods have been applied to early-warning indicators in whole systems (Carpenter et al. 2011), however, it is uncommon to have enough information to build reliable networks or food webs. Consequently, reliably measuring the ecological system at hand is often realistically (and financially) not possible. To be useful to practitioners it may be necessary to move beyond heuristic methods, to methods which supply statistical signifiances or probabilites. And although critiques of some RDMs exist, the rate at which they are rigorously tested do not exceed the proliferation of new methods in the literature. For any method to gain credible traction as a pragmatic tool in ecology, studies shouldl address the concerns of these critiques. These can be addressed using, e.g., bootstrapping, simulations.

In this review I restricted articles to those implying they introduced a 'new method'. Avoiding this potential barrier would have required I review the titles, abstracts, and bodies of over 22,000 articles (Figure \@ref(fig:rdmReviewFlow)). Alternatively, this may also be ameliorated by searching the relevant literature for *applications* of regime detection measures to ecological data, however, I suspect this would similarly yield a large number of articles to review. Also, only a handful of methods have been introduced to the mainstream methodological journals in ecology (e.g., *Ecological Modelling*, *Methods in Ecology and Evolution*; Figure \@ref(fig:jrnlDistFig)). Although many mainstream publications (e.g., *Science*, *Ecology Letters*) include applications of some of the methods identified in this chapter (Table \@ref(tab:methodsMetricsListTab1)), I argue that celebrity and 'new and shiny' [@steel2013applied] methods may influence which methodological articles are printed in these popular journals. 

```{r jrnlDistFig, echo=FALSE,out.width="100%", fig.cap="Number of articles containing new methods per journal."}
# Visualize results
jrnlTemp <- finalMetricsList.bib %>% 
  mutate(journal = ifelse(label =="rodionov_sequential_2005", "Other", journal),
  #        journal = ifelse(label =="tong1990nonlinear", "Other", journal), 
         journal = ifelse(journal =="International Journal of Climatology: A Journal of the Royal Meteorological Society", "International Journal of Climatology", journal),
         journal = ifelse(journal %in% c(NA, "NA"), "Other", journal)
  ) %>%
  mutate(journal = toupper(journal)) %>% 
  group_by(journal) %>% 
  summarise(n = n())

ggplot2::ggplot(jrnlTemp %>% 
  mutate(journal = fct_reorder(journal, desc(n)))) +
  geom_bar(aes(x = journal, y =n), stat = 'identity') +
  ylab('number of articles') + xlab("") +
  coord_flip()+
  theme_bw() + 
  theme(axis.text.y = element_text( hjust = 1, size = 8))
```

A critical survey of potetial and realized applications of these methods would be useful for highlighting the needs of future research and methodological improvements. Many of the methods presented in Table \@ref(tab:methodsMetricsListTab1) have either not been applied to empirical data at all, or were tested only once, often but not always in the article introducing or adapting the methodology [@hawkins2015ecosystems]. Some methods, especially those dubbed 'early warning indicators' (variance, autoregressive model coefficients) have become relativley mainstream in their application to empirical data, despite having been shown to be less robust in noisy and nonlinear systems [@burthe2016early], in systems exhibiting lag-effects [@guttal2013robustness], and in systems not exhibiting catstrophic shifts [@dutta2018robustness]. Unlike these early warning indicators, fewer efforts have been made to test robustness under these and more simple conditions [@dutta2018robustness; c.f. @brock2010interacting; @benedetti2015experimental]. In addition to the paucity of studies attempting to understand the limitations of these methods, this review suggests that simply identifying the suite of methods used in ecological regime shift detections may be difficult using traditional review methods.  Many of the methods metnioned in this review were not identified using a systematic search process in Web of Science and Google Scholar--rather, they were methods of which I was either previously aware and/or highlighted in the few methods reviews [@scheffer2015generic; @rodionov_brief_2005; @roberts2018early; @dakos2015resilience; @mantua_methods_2004; @litzow_early_2016; @kefi2014early; @andersen_ecological_2009; @boettiger_early_2013; @dakos_resilience_2015; @clements2018indicators; @filatova2016regime; @deyoung_regime_2008]. To facilitate this process, an online, comprehensive database may prove useful to the practical ecologist. 

Many of the methods identified in this review have yet to be tested on multiple, empirical datum (see Table \@ref(tab:methodsMetricsListTab1)). 
I categorize the regime detection methods as one of either model-free or model-dependent. Model-free and model-dependent methods are those which do and do not require a mechanistic model to describe the system, respectively. Because many of the model-dependent methods are based on autoregressive modelling apporaches, this is highlighted in the model-dependent section (however most autoregessive models are non-specific).

Model-dependent require a mechanistic (mathematical) representation of the system, models which often carry strict assumptions that are easily violated by empirical systems [@abadi2010assessment]. Model-dependent methods are usefully categorized are used under two contexts: differentiable systems of equations or autoregressive. The methods relying on mechanistic models include model descriptions of systems with many, dynamic and interacting components. For example, models are used to reconstruct trophic food webs where prey or predator collapse induces trophic regime shifts in freshwater lake systems. 

Model-free [or metric-based per @dakos_methods_2012] methods are those which do not require a mathematical represntation of the system. In fact, many require much less knowledge about the system component dynamics and their interactions to calculate a results. The utility of these methods vary with respect to the number of state variables encompassed in the method, and are therefore further categorized as either univariate (using a single dimesion) or multivariable (using but not necessarily requiring multiple dimensions). The most widely used model-free univariate RDMs include descriptive statistics of individual system components (i.e. univariate), such as variance, skewness, and mean value [@mantua_methods_2004; @rodionov_application_2005; @andersen_ecological_2009]. These univariate methods require only very simple calculations, however, their efficacy in empirical systems analysis is controversial. For example, variance [@carpenter2006rising] and skewness (of a single variable), oft referred to generally as 'leading indicators' or 'early-warning indicators' in the literature, has been applied to both theoretical and empirical systems data with varying results. 

@hastings2010regime point out an important feature of using any methods for identifying regime shifts in empirical system data: we only have a single history within which we can compare AND these metrics which depend on the system exhibiting a change in variance or skewness around a mean value before and after a regime shift require hte system to have a smooth potential, rather than one which can manifest complex dynamics (i.e. non-smooth potential). If we are using RDMs to attempt to forecast and prevent non-smooth or abrupt changes, then there is little justification for relying upon these early warning indicators. Specifcally, these early-warning indicators may be most useful when the system is expected to undergo a transcritical or critical bifurcation before exiting a regime [@lenton2011early]. @hastings2010regime aptly point out that any realisitic ecological model should incorporate some degree of stochasticity, and when this stochasticity is introduced into the function, the function will likely not be differentiable at the point of the regime shift [@graham1984existence]. In other words, most (if not all) ecological systems have non-smooth potentials, and many of the current methods for identifying regime shifts assume otherwise, often failing if the assumption is violated. 

To make the regime detection measures more available and transparent to the practical ecologist, I recommend the following:
1. consitent use of fewer methods 
1. persistent collection and maintenance of baseline data (reference data)
1. an on-line database of all methods
  - open-sourced
  - linked to the original sources (in ecology and statistics or mathematics)
  - linked to applications
1. a critical review of the current state of methods in ecology
  - including methodological advancements
  - especially highlighting where the method fails to perform
  - including historical tracking of specific methods to identify which may need to be retired, rather than resuscitated 
1. more empirical applications of these methods (especially of those only tested on toy and experimental data)
1. relation of RDMs in ecology to other fields (computer science, data science, climatology and oceanography)

I suggest (Table \@ref(tab:nextStepsTab)) a suite of questions which may be useful in a critical review of the characteristics, rigor, and application potential of methods in the context of ecological regime shift detection.

```{r nextStepsTab, echo=FALSE}
Questions.stat <- c(
  "Does the method assume smooth potential?",
  "Does the regime shift need to be identified *a priori*?",
  "What are the major assumptions about the distribution of the original data?",
  "Does the method explicitly assume the system/variable is stationary?", 
  "Does the performance of the method change with non-stationarity?",
  "Can the method handle unstructured data?",
  "Can the method handle multiple regime shifts?",
  "What types of regime shifts can the method detect (e.g., stochastic resonance, slow-fast cycles, noise-induced transition)?",
  "Is it a model- or metric-based method?", 
  "Does it have forecasting potential?",
  "Can the method handle uneven sampling?",
  "What are the minimum data requirements (resolution, extent, number of observations)?",
  "How does the method handle missing data (e.g., new invasions)?", 
  "Does the method assume Eulerian or Lagrangian processes?")

Questions.ecol <- c(
  "Does the system *have* smooth potential?",
  "Has the method been tested on empirical data? If so, to what rigor?",
  "What is the impact of losing state variables on long-term predictions (e.g., species extinction)?",
  "Can the method identify drivers?",
  "What assumptions does the method make about the system?", 
  "What types of regime shifts are possible in the system?", 
  "Are regime shift(s) suspected *a priori*?",
  "What lag(s) exist in the data (system)?",
  "Would a positive forecast change management action?",
  "Do predictions translate to other systems?",
  "Can we interpolate data if necessary? If so, what does this mean for inference?",
  "In which discipline(s) beyond ecology has the method been tested?"
  )

Questions = tibble(
  Type = c(
  "Methodological",
  rep("", length(Questions.stat) - 1),
  rep("", length(Questions.ecol) - 1)
  ),
  Questions = c(Questions.stat, Questions.ecol)
  )
  require(kableExtra, quietly = T)
  kable(
  Questions,
  "latex",
  longtable = T,
  booktabs = T,
  caption = "Potential questions for a comprehensive review of the ecological regime detection metrics literature."
  ) %>%
  kable_styling(full_width = F) %>%
  column_spec(1, bold = T, border_right = T) %>%
  column_spec(2, bold = F, width = "30em")
```

## Notes
@overland2008north discusses issues related to oceanic regime shift detection. 