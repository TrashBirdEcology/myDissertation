`r if(knitr:::is_latex_output()) '\\appendix'`
`r if(!knitr:::is_latex_output()) '# (APPENDIX) Appendix {-}'`

# Appendix A: R package regimeDetectionMeasures  {-#regimeDetectionMeasures}  
This appendix contains example analysis associated with the R Package, `regimeDetectionMeasures`. Development source code for this package is available on GitHub as a compressed file at [https://github.com/TrashBirdEcology/regimeDetectionMeasures/archive/master.zip](https://github.com/TrashBirdEcology/regimeDetectionMeasures/archive/master.zip) or at [https://github.com/TrashBirdEcology/regimeDetectionMeasures](https://github.com/TrashBirdEcology/regimeDetectionMeasures).

## Example Analysis
### Measures/metrics calculated
This package will calculate a various regime detection metrics that have been used to 'detect ecological regime shifts'. A 'new' metric, **distance travelled** is also calculated (Burnett and others, *in prep*).

**Composite measures:**

1. Distance travelled -see also package [`distanceTravelled`](https://github.com/TrashBirdEcology/distanceTravelled).  
1. Fisher Information 
1. Variance Index  

**Single-variable measures:**

1. Skewness (mean and mode versions)  
1. Kurtosis  
1. Variance  
1. Mean  
1. Mode  
1. Coefficient of variation, CV  
1. Autocorrelation lag-1 (using `stats::acf`)  

### Example analysis
```{r, echo=TRUE, eval=TRUE, message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, eval=TRUE, message=FALSE, warning=FALSE, out.width = "85%")

library(regimeDetectionMeasures)

# Munge original data -----------------------------------------------------
origData = munge_orig_dat(example = T)
```

### Plots
Plot the original time series as relative abundances. 
```{r , echo=FALSE}
# Plot the original time series abundances
plot_orig_data(data = origData,
               example = F,
               print = T)
```

Plot the time elapsed among observations.
```{r , echo=FALSE}
# Plot the distance between observations
plot_timeDiff(data = origData,
              example = F,
              print = T)
```

Plot species richness over time.
```{r richness, echo=FALSE}
# Plot species richness over time
plot_richness(data = origData,
              example = T,
              print = T)

```

Plot the distance travelled (*s*) and velocity of distance travelled (*v*)
```{r calcDist, echo=FALSE}
# Calculate distance travelled and derviatves of this ---------------------
distances <- calculate_distanceTravelled(origData, derivs = T)
```

Plot the moving-window metrics (FI, VI, and the univariate EWSs)
```{r calcMovingWIndowShit}
# Calculate FI, VI, and early warning signals --------------------------------------------------------
# Uses a moving window analysis to calculate FI and Vi within each window
results <-
    rdm_window_analysis(
        origData,
        winMove = 0.25,
        overrideSiteErr = F,
        min.window.dat = 2,
        fi.equation = "7.12",
        to.calc = c('EWS', 'VI')
    )

# Reults will return all results in a single data frame.
head(results)
```

<!-- ## Source Code Documentation -->
<!-- ```{r, echo=FALSE} -->
<!-- knitr::include_graphics(here::here("packageDocumentation/regimeDetectionMeasures.pdf")) -->
<!-- ``` -->